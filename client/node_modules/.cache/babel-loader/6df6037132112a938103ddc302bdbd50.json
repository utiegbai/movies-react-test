{"ast":null,"code":"import _slicedToArray from \"/home/idee/Desktop/movie-bank/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/idee/Desktop/movie-bank/client/src/components/Movie.js\";\nimport React, { useState, useEffect } from 'react';\nimport localForage from 'localforage';\nimport iziToast from 'izitoast';\nimport { Link } from 'react-router-dom';\nexport default function Movie({\n  show\n}) {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        watchlist = _useState2[0],\n        setWatchlist = _useState2[1];\n\n  const _useState3 = useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        showOnWatchlist = _useState4[0],\n        setShowOnWatchlist = _useState4[1];\n\n  const addShowToWatchList = async () => {\n    const watchList = watchlist;\n    watchList.push(show);\n\n    try {\n      await localForage.setItem('watchlist', watchList);\n      setWatchlist(watchList);\n      iziToast.success({\n        title: 'Success',\n        message: 'New show has been added to watchlist'\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const removeShowFromWatchList = async () => {\n    const newWatchlist = watchlist.filter(item => {\n      return item.id !== show.id;\n    });\n\n    try {\n      await localForage.setItem('watchlist', newWatchlist);\n      setWatchlist(newWatchlist);\n      iziToast.success({\n        title: 'Success',\n        message: `Show #${show.id} has been removed from watchlist`\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  useEffect(() => {\n    const getWatchList = async () => {\n      const watchList = (await localForage.getItem('watchlist')) || [];\n      setWatchlist(watchList);\n    };\n\n    const checkShowExistOnWatchlist = async () => {\n      const match = watchlist.find(item => item.id === show.id);\n\n      if (match) {\n        setShowOnWatchlist(true);\n      } else {\n        setShowOnWatchlist(false);\n      }\n    };\n\n    checkShowExistOnWatchlist(setShowOnWatchlist);\n    getWatchList(setWatchlist);\n  }, [show.id, watchlist]);\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(Link, {\n    to: `/shows/${show.id}`,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    className: \"h-64 w-full object-cover rounded-t\",\n    src: show.image ? show.image.original : 'https://via.placeholder.com/150',\n    alt: show.name,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"p-4\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    className: \"text-sm\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, show.name), React.createElement(\"div\", {\n    className: \"text-xs text-gray-600\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, show.premiered), React.createElement(\"div\", {\n    className: \"flex justify-between mt-4 items-center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"bg-gray-100 px-2 py-1 rounded\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"far fa-star text-yellow-500\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    className: \"ml-2 text-gray-600\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, show.rating.average || 0)), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, showOnWatchlist ? React.createElement(\"button\", {\n    onClick: () => removeShowFromWatchList(),\n    className: \"px-2 text-red-500\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"fas fa-heart\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  })) : React.createElement(\"button\", {\n    onClick: () => addShowToWatchList(),\n    className: \"px-2 text-red-500\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(\"i\", {\n    className: \"far fa-heart\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }))))));\n}","map":{"version":3,"sources":["/home/idee/Desktop/movie-bank/client/src/components/Movie.js"],"names":["React","useState","useEffect","localForage","iziToast","Link","Movie","show","watchlist","setWatchlist","showOnWatchlist","setShowOnWatchlist","addShowToWatchList","watchList","push","setItem","success","title","message","err","console","log","removeShowFromWatchList","newWatchlist","filter","item","id","getWatchList","getItem","checkShowExistOnWatchlist","match","find","image","original","name","premiered","rating","average"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport localForage from 'localforage'\nimport iziToast from 'izitoast'\nimport { Link } from 'react-router-dom'\n\nexport default function Movie({show}) {\n  const [watchlist, setWatchlist] = useState([])\n  const [showOnWatchlist, setShowOnWatchlist] = useState(false)\n\n  const addShowToWatchList = async () => {\n    const watchList = watchlist\n\n    watchList.push(show)\n\n    try {\n      await localForage.setItem('watchlist', watchList)\n      setWatchlist(watchList)\n\n      iziToast.success({\n        title: 'Success',\n        message: 'New show has been added to watchlist'\n      })\n    } catch (err) {\n      console.log(err)\n    }\n  }\n\n  const removeShowFromWatchList = async () => {\n    const newWatchlist = watchlist.filter(item => {\n      return item.id !== show.id\n    })\n\n    try {\n      await localForage.setItem('watchlist', newWatchlist)\n      setWatchlist(newWatchlist)\n\n      iziToast.success({\n        title: 'Success',\n        message: `Show #${show.id} has been removed from watchlist`\n      })\n    } catch (err) {\n      console.log(err)\n    }\n  }\n\n  useEffect(() => {\n    const getWatchList = async () => {\n      const watchList = await localForage.getItem('watchlist') || []\n      setWatchlist(watchList)\n    }\n\n    const checkShowExistOnWatchlist =  async () => {\n      const match = watchlist.find(item => item.id === show.id)\n\n      if (match) {\n        setShowOnWatchlist(true)\n      } else {\n        setShowOnWatchlist(false)\n      }\n    }\n\n    checkShowExistOnWatchlist(setShowOnWatchlist)\n    getWatchList(setWatchlist)\n  }, [show.id, watchlist])\n\n  return (\n    <div>\n      <Link to={`/shows/${show.id}`}>\n        <img className=\"h-64 w-full object-cover rounded-t\" src={show.image ? show.image.original : 'https://via.placeholder.com/150'} alt={show.name} />\n      </Link>\n      <div className=\"p-4\">\n        <h3 className=\"text-sm\">{show.name}</h3>\n        <div className=\"text-xs text-gray-600\">{show.premiered}</div>\n        <div className=\"flex justify-between mt-4 items-center\">\n          <div className=\"bg-gray-100 px-2 py-1 rounded\">\n            <i className=\"far fa-star text-yellow-500\"></i>\n            <span className=\"ml-2 text-gray-600\">{show.rating.average || 0}</span>\n          </div>\n          <div>\n          { showOnWatchlist ? (\n            <button onClick={() => removeShowFromWatchList()} className=\"px-2 text-red-500\">\n              <i className=\"fas fa-heart\"></i>\n            </button>\n          ) : (\n            <button onClick={() => addShowToWatchList()} className=\"px-2 text-red-500\">\n              <i className=\"far fa-heart\"></i>\n            </button>\n          )}\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n}"]},"metadata":{},"sourceType":"module"}